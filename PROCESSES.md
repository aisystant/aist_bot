---
type: process
status: active
created: 2026-02-10
updated: 2026-02-10
---

# –ü—Ä–æ—Ü–µ—Å—Å—ã –±–æ—Ç–∞ Aist

> –í–Ω—É—Ç—Ä–µ–Ω–Ω–∏–µ –ø—Ä–æ—Ü–µ—Å—Å—ã Telegram-–±–æ—Ç–∞ –º–∞—Ä–∞—Ñ–æ–Ω–∞.
> –ú–µ–∂—Å–∏—Å—Ç–µ–º–Ω—ã–µ —Å—Ü–µ–Ω–∞—Ä–∏–∏ ‚Üí `ecosystem-development/PROCESSES.md`.
> –î–µ—Ç–∞–ª—å–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è: `docs/scenarios/`, `docs/processes/`, `docs/data/`.

---

## 1. FSM Routing (–æ–±—Ä–∞–±–æ—Ç–∫–∞ —Å–æ–æ–±—â–µ–Ω–∏—è)

> –¢–∏–ø: –≤–Ω—É—Ç—Ä–µ–Ω–Ω–∏–π –ø—Ä–æ—Ü–µ—Å—Å
> –í–ª–∞–¥–µ–ª–µ—Ü: –ë–æ—Ç (State Machine)

**–í—Ö–æ–¥:** –°–æ–æ–±—â–µ–Ω–∏–µ –æ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è (Telegram update)

**–î–µ–π—Å—Ç–≤–∏–µ:**
1. Middleware: –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ, –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è
2. Router: engines ‚Üí handlers ‚Üí fallback (–ø–æ—Ä—è–¥–æ–∫ –∫—Ä–∏—Ç–∏—á–µ–Ω!)
3. Dispatcher: –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —Ä–µ–∂–∏–º–∞ (–ú–∞—Ä–∞—Ñ–æ–Ω/–õ–µ–Ω—Ç–∞) ‚Üí –≤—ã–∑–æ–≤ SM
4. State Machine: —Ç–µ–∫—É—â–∏–π —Å—Ç–µ–π—Ç ‚Üí `handle()` ‚Üí —Å–æ–±—ã—Ç–∏–µ ‚Üí –ø–µ—Ä–µ—Ö–æ–¥
5. –ù–æ–≤—ã–π —Å—Ç–µ–π—Ç: `enter()` ‚Üí –æ—Ç–≤–µ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é

**–í—ã—Ö–æ–¥:** –û—Ç–≤–µ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é (—Å–æ–æ–±—â–µ–Ω–∏–µ/–∫–ª–∞–≤–∏–∞—Ç—É—Ä–∞) + –Ω–æ–≤–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ FSM

---

## 2. Onboarding (—Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è —É—á–µ–Ω–∏–∫–∞)

> –¢–∏–ø: –≤–Ω—É—Ç—Ä–µ–Ω–Ω–∏–π –ø—Ä–æ—Ü–µ—Å—Å
> –í–ª–∞–¥–µ–ª–µ—Ü: –ë–æ—Ç (handlers/onboarding.py)

**–í—Ö–æ–¥:** –ö–æ–º–∞–Ω–¥–∞ /start –æ—Ç –Ω–æ–≤–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è

**–î–µ–π—Å—Ç–≤–∏–µ:**
1. –ü—Ä–æ–≤–µ—Ä–∫–∞: –Ω–æ–≤—ã–π –∏–ª–∏ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å
2. –í—ã–±–æ—Ä —è–∑—ã–∫–∞
3. –°–æ–∑–¥–∞–Ω–∏–µ –ø—Ä–æ—Ñ–∏–ª—è –≤ –ë–î
4. –í—ã–±–æ—Ä —Ä–µ–∂–∏–º–∞ (–ú–∞—Ä–∞—Ñ–æ–Ω / –õ–µ–Ω—Ç–∞)
5. –ü–µ—Ä–µ—Ö–æ–¥ –≤ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∏–π —Å—Ç–µ–π—Ç SM

**–í—ã—Ö–æ–¥:** –ü—Ä–æ—Ñ–∏–ª—å –≤ –ë–î, –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤ –Ω–∞—á–∞–ª—å–Ω–æ–º —Å—Ç–µ–π—Ç–µ –≤—ã–±—Ä–∞–Ω–Ω–æ–≥–æ —Ä–µ–∂–∏–º–∞

---

## 3. –£—Ä–æ–∫ –ú–∞—Ä–∞—Ñ–æ–Ω–∞ (–ø–æ–¥–∞—á–∞ + –ø—Ä–æ–≤–µ—Ä–∫–∞)

> –¢–∏–ø: –≤–Ω—É—Ç—Ä–µ–Ω–Ω–∏–π –ø—Ä–æ—Ü–µ—Å—Å
> –í–ª–∞–¥–µ–ª–µ—Ü: –ë–æ—Ç (states/workshops/marathon/)

**–í—Ö–æ–¥:** –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤ —Å—Ç–µ–π—Ç–µ `lesson` –∏–ª–∏ `question`

**–î–µ–π—Å—Ç–≤–∏–µ:**
1. `lesson.enter()` ‚Üí –ø–æ–∫–∞–∑–∞—Ç—å —Ç–µ–æ—Ä–∏—é –¥–Ω—è
2. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —á–∏—Ç–∞–µ—Ç ‚Üí –Ω–∞–∂–∏–º–∞–µ—Ç ¬´–ì–æ—Ç–æ–≤¬ª
3. `question.enter()` ‚Üí –ø–æ–∫–∞–∑–∞—Ç—å –≤–æ–ø—Ä–æ—Å (Bloom's taxonomy)
4. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –æ—Ç–≤–µ—á–∞–µ—Ç ‚Üí –æ—Ü–µ–Ω–∫–∞ —á–µ—Ä–µ–∑ Claude API
5. –ü—Ä–∏ –ø—Ä–∞–≤–∏–ª—å–Ω–æ–º –æ—Ç–≤–µ—Ç–µ ‚Üí –ø–µ—Ä–µ—Ö–æ–¥ –∫ –∑–∞–¥–∞–Ω–∏—é –∏–ª–∏ –±–æ–Ω—É—Å—É

**–í—ã—Ö–æ–¥:** –ü—Ä–æ–≥—Ä–µ—Å—Å —É—á–µ–Ω–∏–∫–∞ –æ–±–Ω–æ–≤–ª—ë–Ω, –æ—Ç–≤–µ—Ç —Å–æ—Ö—Ä–∞–Ω—ë–Ω –≤ –ë–î

---

## 4. Deploy (–æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –±–æ—Ç–∞)

> –¢–∏–ø: –≤–Ω—É—Ç—Ä–µ–Ω–Ω–∏–π –ø—Ä–æ—Ü–µ—Å—Å
> –í–ª–∞–¥–µ–ª–µ—Ü: –†–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫

**–í—Ö–æ–¥:** –ö–æ–¥ –≤ –≤–µ—Ç–∫–µ (main –∏–ª–∏ new-architecture)

**–î–µ–π—Å—Ç–≤–∏–µ:**
1. –¢–µ—Å—Ç—ã (smoke test + E2E –≤ Telegram)
2. Merge –≤ —Ü–µ–ª–µ–≤—É—é –≤–µ—Ç–∫—É
3. Deploy –Ω–∞ —Å–µ—Ä–≤–µ—Ä (PM2 restart)
4. –ü—Ä–æ–≤–µ—Ä–∫–∞ healthcheck

**–í—ã—Ö–æ–¥:** –û–±–Ω–æ–≤–ª—ë–Ω–Ω—ã–π –±–æ—Ç —Ä–∞–±–æ—Ç–∞–µ—Ç

---

## 5. Keyboard Lifecycle (—É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∫–ª–∞–≤–∏–∞—Ç—É—Ä–æ–π)

> –¢–∏–ø: –≤–Ω—É—Ç—Ä–µ–Ω–Ω–∏–π –ø—Ä–æ—Ü–µ—Å—Å
> –í–ª–∞–¥–µ–ª–µ—Ü: –ë–æ—Ç (State Machine + BaseState)

**–í—Ö–æ–¥:** –ü–µ—Ä–µ—Ö–æ–¥ –º–µ–∂–¥—É —Å—Ç–µ–π—Ç–∞–º–∏ (SM `_transition()` / `go_to()`)

**–î–µ–π—Å—Ç–≤–∏–µ:**

1. SM engine –ø—Ä–æ–≤–µ—Ä—è–µ—Ç `keyboard_type` —É from_state –∏ to_state
2. –ï—Å–ª–∏ `reply ‚Üí non-reply`: –∑–∞–ø–∏—Å—ã–≤–∞–µ—Ç `ReplyKeyboardRemove()` –≤ `BaseState._pending_keyboard_cleanup[chat_id]`
3. –ü–µ—Ä–≤—ã–π `send()` –Ω–æ–≤–æ–≥–æ —Å—Ç–µ–π—Ç–∞ –ø—Ä–∏–º–µ–Ω—è–µ—Ç cleanup:
   - –ë–µ–∑ `reply_markup` ‚Üí –ø—Ä–∏–∫—Ä–µ–ø–ª—è–µ—Ç `ReplyKeyboardRemove` –∫ —Å–æ–æ–±—â–µ–Ω–∏—é
   - –° `InlineKeyboardMarkup` ‚Üí send+edit (–æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç —Å `ReplyKeyboardRemove`, –∑–∞—Ç–µ–º `edit_reply_markup` –¥–ª—è InlineKeyboard)
   - –° `ReplyKeyboardMarkup` ‚Üí –ø—Ä–æ–ø—É—Å–∫–∞–µ—Ç cleanup (–Ω–æ–≤–∞—è Reply-–∫–ª–∞–≤–∏–∞—Ç—É—Ä–∞ –∑–∞–º–µ–Ω—è–µ—Ç —Å—Ç–∞—Ä—É—é)
4. –°—Ç–µ–π—Ç—ã —Å `keyboard_type = "reply"` —Ç–∞–∫–∂–µ —á–∏—Å—Ç—è—Ç –∫–ª–∞–≤–∏–∞—Ç—É—Ä—É –≤—Ä—É—á–Ω—É—é –≤ `handle()` (defense-in-depth –¥–ª—è –Ω–æ—Ä–º–∞–ª—å–Ω–æ–≥–æ –ø—É—Ç–∏; SM auto-cleanup ‚Äî safety net –¥–ª—è command-bypass —á–µ—Ä–µ–∑ `go_to()`)

**–í—ã—Ö–æ–¥:** Reply-–∫–ª–∞–≤–∏–∞—Ç—É—Ä–∞ —É–¥–∞–ª–µ–Ω–∞ –ø—Ä–∏ –ø–µ—Ä–µ—Ö–æ–¥–µ –≤ non-reply —Å—Ç–µ–π—Ç. Inline-–∫–ª–∞–≤–∏–∞—Ç—É—Ä—ã ‚Äî self-cleaning —á–µ—Ä–µ–∑ `edit_text()`.

**–¢–∏–ø—ã:** `"inline"` (default, 13 —Å—Ç–µ–π—Ç–æ–≤), `"reply"` (4 —Å—Ç–µ–π—Ç–∞), `"none"` (2 —Å—Ç–µ–π—Ç–∞).

**–ü—Ä–∏ –¥–æ–±–∞–≤–ª–µ–Ω–∏–∏ –Ω–æ–≤–æ–≥–æ —Å—Ç–µ–π—Ç–∞:**
1. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å `keyboard_type` –≤ –∫–ª–∞—Å—Å–µ
2. –û–±–Ω–æ–≤–∏—Ç—å —Ç–∞–±–ª–∏—Ü—É –≤ `CLAUDE.md ¬ß 10.5`
3. –ï—Å–ª–∏ `reply`: –¥–æ–±–∞–≤–∏—Ç—å `ReplyKeyboardRemove()` –∫ –∫–∞–∂–¥–æ–º—É exit-–ø—É—Ç–∏ –≤ `handle()`

---

## 6. Issue Triage (—Ç—Ä–∏–∞–∂ –∑–∞–º–µ—á–∞–Ω–∏–π ‚Üí WP-7)

> –¢–∏–ø: –≤–Ω—É—Ç—Ä–µ–Ω–Ω–∏–π –ø—Ä–æ—Ü–µ—Å—Å
> –í–ª–∞–¥–µ–ª–µ—Ü: Claude Code (—Å–µ—Å—Å–∏—è WP-7)

**–†–æ–ª–∏ –∏ –∏—Å–ø–æ–ª–Ω–∏—Ç–µ–ª–∏:**

| –†–æ–ª—å | –ö—Ç–æ | –ß—Ç–æ –¥–µ–ª–∞–µ—Ç |
|------|-----|-----------|
| **–ü–æ—Å—Ç–∞–≤—â–∏–∫ intake** | –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ç–æ—Ä (bash) | unsatisfied-report ‚Üí unsatisfied-questions.md |
| **–ü–æ—Å—Ç–∞–≤—â–∏–∫ intake** | –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ç–æ—Ä (bash) | code-scan ‚Üí captures.md |
| **–ü–æ—Å—Ç–∞–≤—â–∏–∫ intake** | –°—Ç—Ä–∞—Ç–µ–≥ (Claude, Note-Review) | –º–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü–∏—è –∑–∞–º–µ—Ç–æ–∫ ‚Üí fleeting-notes.md |
| **–ü–æ—Å—Ç–∞–≤—â–∏–∫ intake** | –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å (TG) | `.–±–∞–≥ ...` ‚Üí fleeting-notes.md |
| **–¢—Ä–∏–∞–∂—ë—Ä** | Claude Code (—Å–µ—Å—Å–∏—è WP-7) | —á–∏—Ç–∞–µ—Ç intake ‚Üí –∫–∞—Ç–µ–≥–æ—Ä–∏–∑–∏—Ä—É–µ—Ç ‚Üí –ø—Ä–µ–¥–ª–∞–≥–∞–µ—Ç –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç |
| **–ò—Å–ø–æ–ª–Ω–∏—Ç–µ–ª—å** | Claude Code (—Å–µ—Å—Å–∏—è WP-7) | –ø–∏—à–µ—Ç –∫–æ–¥, —Ñ–∏–∫—Å–∏—Ç –±–∞–≥–∏ –ø–æ –æ–¥–æ–±—Ä–µ–Ω–Ω–æ–º—É scope |

> –í—Å–µ Claude-—Ä–æ–ª–∏ ‚Äî —ç—Ç–æ –æ–¥–∏–Ω LLM –≤ —Ä–∞–∑–Ω—ã—Ö –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞—Ö (—Å–º. DP.AGENT.001 ¬ß 3).

**–í—Ö–æ–¥:** –û—Ç–∫—Ä—ã—Ç–∏–µ —Å–µ—Å—Å–∏–∏ —Ç–µ—Ö–¥–æ–ª–≥–∞ (WP-7)

**–î–µ–π—Å—Ç–≤–∏–µ:**
1. –ü—Ä–æ—á–∏—Ç–∞—Ç—å 3 intake:
   - `DS-my-strategy/inbox/unsatisfied-questions.md` ‚Äî feedback –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –±–æ—Ç–∞ (üëç/üîç/‚úèÔ∏è)
   - `DS-my-strategy/inbox/fleeting-notes.md` ‚Äî –∑–∞–º–µ—Ç–∫–∏ —Å —Ç–µ–≥–æ–º ¬´–±–æ—Ç/–±–∞–≥¬ª
   - `DS-my-strategy/inbox/captures.md` ‚Äî code-scan –æ–±–Ω–∞—Ä—É–∂–µ–Ω–∏—è (TODO/FIXME)
2. –ü—Ä–æ—á–∏—Ç–∞—Ç—å —Ç–µ–∫—É—â–∏–π `WP-7-bot-tech-debt.md` backlog
3. –ù–æ–≤—ã–µ –∑–∞–º–µ—á–∞–Ω–∏—è ‚Üí –∫–∞—Ç–µ–≥–æ—Ä–∏–∑–æ–≤–∞—Ç—å:
   - **L** (Latency) ‚Äî –º–µ–¥–ª–µ–Ω–Ω–æ, —Ç–æ—Ä–º–æ–∑–∏—Ç, –¥–æ–ª–≥–æ
   - **C** (Code) ‚Äî –±–∞–≥, TODO, –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ, legacy
   - **U** (UX) ‚Äî –Ω–µ—É–¥–æ–±–Ω–æ, –Ω–µ–ø–æ–Ω—è—Ç–Ω–æ, –Ω–µ—Ç –∫–Ω–æ–ø–∫–∏
   - **I** (Infrastructure) ‚Äî scheduler, deploy, monitoring
4. –û—Ü–µ–Ω–∏—Ç—å –±—é–¥–∂–µ—Ç –∫–∞–∂–¥–æ–≥–æ (0.5h / 1h / 2h+)
5. –ü—Ä–µ–¥–ª–æ–∂–∏—Ç—å: —á—Ç–æ –±–µ—Ä—ë–º –≤ scope —Å–µ—Å—Å–∏–∏, —á—Ç–æ –æ—Ç–ª–æ–∂–∏—Ç—å, —á—Ç–æ –æ—Ç–∫–ª–æ–Ω–∏—Ç—å
6. –û–¥–æ–±—Ä–µ–Ω–Ω—ã–µ ‚Üí WP-7 backlog, –æ—Ç—Ä–∞–±–æ—Ç–∞–Ω–Ω—ã–µ ‚Üí —É–±—Ä–∞—Ç—å –∏–∑ intake

**–í—ã—Ö–æ–¥:** –û–±–Ω–æ–≤–ª—ë–Ω–Ω—ã–π WP-7 backlog + scope —Ç–µ–∫—É—â–µ–π —Å–µ—Å—Å–∏–∏

**–¢—Ä–∏–≥–≥–µ—Ä:** ¬´–û—Ç–∫—Ä—ã–≤–∞–µ–º —Å–µ—Å—Å–∏—é —Ç–µ—Ö–¥–æ–ª–≥–∞¬ª / ¬´WP-7¬ª / ¬´–î–∞–≤–∞–π —Ä–∞–∑–±–µ—Ä—ë–º –∑–∞–º–µ—á–∞–Ω–∏—è¬ª

---

*–ü–æ—Å–ª–µ–¥–Ω–µ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ: 2026-02-16*
